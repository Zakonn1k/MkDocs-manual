# Добавления ключа SSH

## 1. На клиентской машине (ваш ПК)

Если ключа ещё нет — создаём его:
``` bash
ssh-keygen -t ed25519
```

Ключ сохранится в ~/.ssh/id_ed25519 (или id_rsa), а публичный — ~/.ssh/id_ed25519.pub.

## 2. Скопировать публичный ключ на сервер

Есть два варианта:

* Автоматически:
``` bash
ssh-copy-id user@server_ip
```

* Вручную:
Посмотреть содержимое ключа:
``` bash
cat ~/.ssh/id_ed25519.pub
```

Скопировать строку.

На сервере зайти в систему:
``` bash
ssh user@server_ip
```

Создать папку (если нет):
``` bash
mkdir -p ~/.ssh
chmod 700 ~/.ssh
```
Добавить ключ в файл:
``` bash
nano ~/.ssh/authorized_keys
```
Вставить туда строку и сохранить.

Выставить права:
``` bash
chmod 600 ~/.ssh/authorized_keys
```
## 3. Проверить подключение

Теперь можно пробовать подключаться:
``` bash
ssh user@server_ip
```

Если всё правильно — пароль не спросит (или спросит только passphrase, если вы задавали её при генерации ключа).

## 4. (Необязательно) Запретить вход по паролю

Чтобы повысить безопасность:

Редактируем конфиг:
``` bash
sudo nano /etc/ssh/sshd_config
```

Находим строки и меняем:
``` bash
PasswordAuthentication no
PubkeyAuthentication yes
``` 

Перезапускаем SSH:
``` bash
sudo systemctl restart ssh
```
